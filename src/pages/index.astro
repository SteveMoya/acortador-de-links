---
import Layout from "../layouts/Layout.astro";
import Card from "../components/Card.astro";
import type { Session } from "@auth/core/types";

import { getSession } from "auth-astro/server";

const session: Session | null = await getSession(Astro.request);

import { Auth, SignIn, SignOut } from "auth-astro/components";
import { Picture } from "astro:assets";
---

<Layout
	title="Acortador de Link"
	description="Esta Aplicacion trata de solucionar el problema de las url super largas acortandolas"
>
	<!-- NavBar -->
	<header>
		<nav class="flex justify-between items-center mt-4">
			<a href="/" class="text-2xl font-bold">Acortador de Link</a>
			<a href="/" class="text-lg">Acortador</a>
			<a href="/" class="text-lg">Estadisticas</a>
			<div>
				<Auth>
					{
						session ? (
							<div class="flex items-center w-[300px] gap-2 my-4">
								<Picture
									class="w-8 h-8 rounded-full"
									src={session.user?.image || ''}
									alt={session.user?.name || 'Error a cargar la imagen'}
									inferSize
								/>
								<span class="text-sm font-semibold hidden md:flex">
									{session.user?.name}
								</span>
								<SignOut class="text-sm font-semibold">
									Cerrar Sesion
								</SignOut>
							</div>
						) : (
							<div class="items-center justify-center my-4 ">
								<SignIn
									class="social-button github hover:text-[#333]"
									provider="github"
								>
									{" "}
									Github
									{/* <Icon
										name="mdi:github"
										class="h-6 w-auto"
									/> */}
								</SignIn>
								<SignIn
									class="social-button google hover:text-[#db4437]"
									provider="google"
								>
									{" "}
									Google
									{/* <Icon
											name="mdi:google"
											class="h-6 w-auto"
										/> */}
								</SignIn>
							</div>
						)
					}
				</Auth>
			</div>
		</nav>
	</header>
	<!--End NavBar -->
	<!-- Main Content -->
	<main class="my-10 mx-auto max-w-screen-xl max-h-screen">
		<h1 class="text-4xl">Acortador de Link</h1>
	</main>
	<!-- End Main Content -->
	<!-- Footer -->
	<footer class="text-center my-4">
		<p class="text-sm">Hecho con ❤️ por <a href="https://github.com/SteveMoya" class="text-blue-500">Steve Moya</a></p>
	</footer>
	<!-- End Footer -->
</Layout>
